(this["webpackJsonpmy-first-react-app"]=this["webpackJsonpmy-first-react-app"]||[]).push([[0],{12:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var n="GETPRODUCTION",r="TOGGLESELECT",s="EDITPRODUCTION",c="CLEARSELECTED "},19:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),s=a(1);class c extends n.Component{constructor(e){super(e),this.btn=null,this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchStart=this.onTouchStart.bind(this)}onTouchStart(){this.btn.style.opacity="0.3"}onTouchEnd(){this.btn.style.opacity="1",this.props.clickCallBack()}shouldComponentUpdate(e,t){return!Object(s.c)(Object(s.b)(this.props),Object(s.b)(e))||!Object(s.c)(Object(s.b)(this.state),Object(s.b)(t))}render(){return r.a.createElement("div",{className:"btn-con ".concat(this.props.className),onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,ref:e=>this.btn=e},this.props.text||"\u786e\u8ba4")}}},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),s=a(1),c=a(11),o=a(42);a(73);class i extends n.Component{constructor(e){super(e),this.state={navState:!1},this.toggleNav=this.toggleNav.bind(this)}shouldComponentUpdate(e,t){return!Object(s.c)(Object(s.b)(this.props),Object(s.b)(e))||!Object(s.c)(Object(s.b)(this.state),Object(s.b)(t))}render(){return r.a.createElement("header",{className:"header-container"},r.a.createElement("span",{className:"header-slide-icon icon-catalog",onClick:this.toggleNav}),r.a.createElement("span",{className:"header-title"},this.props.headerTitle),this.props.record&&r.a.createElement(c.c,{exact:!0,to:"/record",className:"header-link icon-jilu"}),this.props.confirm&&r.a.createElement(c.c,{exact:!0,to:"/",className:"header-link header-link-confirm"},"\u786e\u5b9a"),r.a.createElement(o.a,{in:this.state.navState,timeout:300,classNames:"nav",unmountOnExit:!0},r.a.createElement("aside",{key:"nav-slide",className:"nav-slide-list",onClick:this.toggleNav},r.a.createElement(c.c,{to:"/",exact:!0,className:"nav-link icon-jiantou-copy-copy"},"\u9996\u9875"),r.a.createElement(c.c,{to:"/balance",exact:!0,className:"nav-link icon-jiantou-copy-copy"},"\u63d0\u73b0"),r.a.createElement(c.c,{to:"/helpcenter",exact:!0,className:"nav-link icon-jiantou-copy-copy"},"\u5173\u4e8e"))))}toggleNav(){this.setState(e=>({navState:!e.navState}))}}},26:function(e,t,a){"use strict";var n=a(7),r=a.n(n),s=a(13),c=a(3),o=a(40),i=a.n(o),l={baseUrl:"//api.cangdu.org",imgUrl:"//elm.cangdu.org/img/"};class u{http(e,t,a){return new Promise((n,r)=>{"object"!==typeof a&&(a={});var s=Object(c.a)({method:e,url:t,baseURL:l.baseUrl,timeout:3e4,params:null,data:null,headers:null,withCredentials:!0,validateStatus:e=>e>=200&&e<300},a);i.a.request(s).then(e=>{n("object"===typeof e.data?e.data:JSON.stringify(e.data))}).catch(e=>{e.response?r(e.response.data):r(e)})})}}u.baseURL=l.baseUrl;class p extends u{uploadImg(e={}){var t=this;return Object(s.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.http("post","//elm.cangdu.org/v1/addimg/shop",e);case 3:if(!(n=a.sent)||1!==n.status){a.next=8;break}return a.abrupt("return",n);case 8:throw{msg:"\u4e0a\u4f20\u56fe\u7247\u5931\u8d25",response:n,params:e,url:"//elm.cangdu.org/v1/addimg/shop"};case 10:a.next=15;break;case 12:throw a.prev=12,a.t0=a.catch(0),a.t0;case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()}getRecords(e={}){var t=this;return Object(s.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.http("get","/shopro/data/record/".concat(e.type),e);case 3:if(!((n=a.sent)&&n.data instanceof Object&&200===n.http_code)){a.next=8;break}return a.abrupt("return",n.data);case 8:throw{msg:"\u83b7\u53d6\u8bb0\u5f55\u6570\u636e\u5931\u8d25",response:n,params:e,url:p.baseURL+"/shopro/data/record/".concat(e.type)};case 10:a.next=15;break;case 12:throw a.prev=12,a.t0=a.catch(0),a.t0;case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()}getProduction(e={}){var t=this;return Object(s.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.http("get","/shopro/data/products",e);case 3:if(!(n=a.sent)||200!==n.http_code){a.next=8;break}return a.abrupt("return",n.data.data||[]);case 8:throw{msg:"\u83b7\u53d6\u5546\u54c1\u6570\u636e\u5f02\u5e38",response:n,params:e,url:p.baseURL+"/shopro/data/products"};case 10:a.next=15;break;case 12:throw a.prev=12,a.t0=a.catch(0),a.t0;case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()}getBalance(e={}){var t=this;return Object(s.a)(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.http("get","/shopro/data/balance",e);case 3:if(!((n=a.sent)&&n.data instanceof Object&&200===n.http_code)){a.next=8;break}return a.abrupt("return",n.data.data||{});case 8:throw{msg:"\u83b7\u53d6\u4f63\u91d1\u6570\u636e\u5931\u8d25",response:n,params:e,url:p.baseURL+"/shopro/data/balance"};case 10:a.next=15;break;case 12:throw a.prev=12,a.t0=a.catch(0),a.t0;case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()}}t.a=new p},29:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a(7),r=a.n(n),s=a(3),c=a(13),o=a(12),i=a(26),l=()=>function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.getProduction();case 3:a=(a=e.sent).map(e=>Object(s.a)(Object(s.a)({},e),{},{selectStatus:!0,selectNum:0})),t((n=a,{type:o.c,dataList:n})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}var n}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=e=>({type:o.d,index:e}),p=(e,t)=>({type:o.b,index:e,selectNum:t}),m=()=>({type:o.a})},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),s=(a(72),a(1)),c=a(19),o=a(42);class i extends n.Component{constructor(e){super(e),this.confirm=()=>{this.props.onClose&&this.props.onClose()},this.confirm=this.confirm.bind(this)}shouldComponentUpdate(e,t){return!Object(s.c)(Object(s.b)(this.props),Object(s.b)(e))||!Object(s.c)(Object(s.b)(this.state),Object(s.b)(t))}render(){return r.a.createElement(o.a,{in:this.props.alertStatus,timeout:300,classNames:"alert",unmountOnExit:!0},r.a.createElement("div",{className:"alert"},r.a.createElement("div",{className:"alert-wrraper"},r.a.createElement("div",{className:"alert-content"},this.props.alertContent),r.a.createElement(c.a,{className:"confirm-btn",clickCallBack:this.confirm}))))}}},45:function(e,t,a){e.exports=a(78)},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t){!function(e){var t,a=0,n=document.documentElement;t=window.devicePixelRatio,a=75,a*=n.clientWidth/750,n.style.fontSize=a+"px",n.setAttribute("data-dpr",t)}()},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"formData",(function(){return R}));var r={};a.r(r),a.d(r,"proData",(function(){return F}));var s=a(0),c=a.n(s),o=a(15),i=a.n(o),l=a(11),u=a(4),p=a(7),m=a.n(p),h=a(13);function d(e){class t extends s.Component{constructor(e){super(e),this.state={component:null}}componentDidMount(){var t=this;return Object(h.a)(m.a.mark((function a(){var n,r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:n=a.sent,r=n.default,t.setState({component:r});case 5:case"end":return a.stop()}}),a)})))()}render(){var e=this.state.component;return e?c.a.createElement(e,this.props):null}}return t}var b=a(20),f=a(1),v=a(29),E=a(38),g=a(25),O=a(19),j=(e,t,a,n)=>(t.forEach((t,n)=>{e.length>t+n&&(e=e.substring(0,t+n)+a+e.substring(t+n))}),e=e.trim(),requestAnimationFrame(()=>{n.setSelectionRange(e.length,e.length)}),e);a(75);class S extends s.Component{constructor(e){super(e),this.state={alertStatus:!1,alertTips:"",selectedProList:[]},this.innitData=this.innitData.bind(this),this.submitForm=this.submitForm.bind(this),this.handleInput=this.handleInput.bind(this),this.upLoadImg=this.upLoadImg.bind(this)}shouldComponentUpdate(e,t){return!Object(f.c)(Object(f.b)(this.props),Object(f.b)(e))||!Object(f.c)(Object(f.b)(this.state),Object(f.b)(t))}componentDidMount(){this.innitData(this.props)}componentWillUnmount(){}componentDidUpdate(e){Object(f.c)(Object(f.b)(this.props.proData),Object(f.b)(e.proData))||this.innitData(this.props)}render(){return c.a.createElement("main",{className:"home-container"},c.a.createElement(g.a,{headerTitle:"\u9996\u9875",record:!0}),c.a.createElement("div",null,c.a.createElement("p",{className:"common-title"},"\u8bf7\u5f55\u5165\u60a8\u7684\u4fe1\u606f"),c.a.createElement("form",{className:"home-form"},c.a.createElement("div",{className:"home-form-item"},c.a.createElement("span",null,"\u9500\u552e\u91d1\u989d\uff1a"),c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u91d1\u989d",value:this.props.formData.orderSum,onChange:e=>this.handleInput("orderSum",e)})),c.a.createElement("div",{className:"home-form-item"},c.a.createElement("span",null,"\u5ba2\u6237\u59d3\u540d\uff1a"),c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u59d3\u540d",value:this.props.formData.name,onChange:e=>this.handleInput("name",e)})),c.a.createElement("div",{className:"home-form-item"},c.a.createElement("span",null,"\u5ba2\u6237\u7535\u8bdd\uff1a"),c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u7535\u8bdd",maxLength:"13",value:this.props.formData.phoneNo,onChange:e=>this.handleInput("phoneNo",e)})))),c.a.createElement("div",null,c.a.createElement("p",{className:"common-title"},"\u8bf7\u9009\u62e9\u9500\u552e\u7684\u4ea7\u54c1"),c.a.createElement(l.b,{to:"/production",className:"common-select-btn"},this.state.selectedProList.length>0?c.a.createElement("ul",{className:"select-pro-list"},this.state.selectedProList.map((e,t)=>c.a.createElement("li",{key:t,className:"select-pro-item ellipsis"},e.product_name,"x",e.selectNum))):"\u9009\u62e9\u4ea7\u54c1")),c.a.createElement("div",{className:"upload-img-con"},c.a.createElement("p",{className:"common-title"},"\u8bf7\u4e0a\u4f20\u53d1\u7968\u51ed\u8bc1"),c.a.createElement("div",{className:"file-lable"},c.a.createElement("span",{className:"common-select-btn"},"\u4e0a\u4f20\u56fe\u7247"),c.a.createElement("input",{type:"file",onChange:this.upLoadImg,accept:"image/*"})),c.a.createElement("img",{className:"select-img",src:this.props.formData.imgPath,alt:""})),c.a.createElement(O.a,{className:"submit-btn",text:"\u63d0\u4ea4",clickCallBack:this.submitForm}),c.a.createElement(E.a,{alertContent:this.state.alertTips,alertStatus:this.state.alertStatus,onClose:()=>{this.setState({alertStatus:!1,alertTips:""})}}))}innitData(e){var t=(e.proData.dataList||[]).filter(e=>e.selectStatus&&e.selectNum);this.setState({selectedProList:t})}closeAlert(){this.setState({alertStatus:!1,alertTips:""})}submitForm(){var e=this.props.formData,t=e.orderSum,a=e.name,n=e.phoneNo,r=e.imgPath,s="";t.toString().length?a.toString().length?n.toString().length?r.toString().length?(s="\u6dfb\u52a0\u6570\u636e\u6210\u529f",this.props.clearData(),this.props.clearSelected()):s="\u8bf7\u4e0a\u4f20\u53d1\u7968\u51ed\u8bc1":s="\u8bf7\u586b\u5199\u6b63\u786e\u624b\u673a\u53f7":s="\u8bf7\u586b\u5199\u59d3\u540d":s="\u8bf7\u586b\u5199\u91d1\u989d",this.setState({alertTips:s,alertStatus:!0})}handleInput(e,t){var a=t.target.value;switch(e){case"orderSum":a=a.replace(/\D/g,"");break;case"name":break;case"phoneNo":a=this.props.padStr(a.replace(/\D/g,""),[3,7]," ",t.target)}this.props.saveFormData(e,a)}upLoadImg(e){var t=e.target.files[0],a=new FileReader;a.onload=()=>{this.props.saveImg(a.result)},a.readAsDataURL(t)}}var x,N=Object(b.b)(e=>({formData:e.formData,proData:e.proData}),e=>({saveFormData:(t,a)=>e(((e,t)=>({type:"SAVEFORMDATA",key:e,value:t}))(t,a)),saveImg:t=>e((e=>({type:"SAVEIMG",path:e}))(t)),clearData:()=>e({type:"CLEARDATA"}),clearSelected:()=>e(Object(v.a)())}))(S),k=(x=N,class extends c.a.Component{render(){return c.a.createElement(x,Object.assign({padStr:j},this.props))}}),y=d(()=>a.e(6).then(a.bind(null,84))),D=d(()=>a.e(3).then(a.bind(null,87))),L=d(()=>a.e(4).then(a.bind(null,85))),C=d(()=>a.e(5).then(a.bind(null,86)));class w extends s.Component{render(){return c.a.createElement(l.a,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/",exact:!0,render:e=>c.a.createElement(k,e)}),c.a.createElement(u.a,{from:"/home",to:"/"}),c.a.createElement(u.b,{path:"/production",render:e=>c.a.createElement(y,e)}),c.a.createElement(u.b,{path:"/record",render:e=>c.a.createElement(D,e)}),c.a.createElement(u.b,{path:"/balance",render:e=>c.a.createElement(L,e)}),c.a.createElement(u.b,{path:"/helpcenter",render:e=>c.a.createElement(C,e)})))}}var T=a(3),A=a(16),I=a(41),U={orderSum:"",name:"",phoneNo:"",imgPath:""},R=(e=U,t={})=>{switch(t.type){case"SAVEFORMDATA":return Object(T.a)(Object(T.a)({},e),{},{[t.key]:t.value});case"SAVEIMG":return Object(T.a)(Object(T.a)({},e),{},{imgPath:t.path});case"CLEARDATA":return Object(T.a)(Object(T.a)({},e),U);default:return e}},P=a(12),J={dataList:[]},F=(e=J,t)=>{var a,n;switch(t.type){case P.c:return a=f.a.fromJS(t.dataList),Object(T.a)(Object(T.a)({},e),{dataList:a.toJS()});case P.d:return a=f.a.fromJS(e.dataList),n=(n=f.a.Map(e.dataList[t.index])).set("selectStatus",!n.get("selectStatus")),a=a.set(t.index,n),Object(T.a)(Object(T.a)({},e),{dataList:a.toJS()});case P.b:return a=f.a.fromJS(e.dataList),n=(n=f.a.Map(e.dataList[t.index])).set("selectNum",t.selectNum),a=a.set(t.index,n),Object(T.a)(Object(T.a)({},e),{dataList:a.toJS()});case P.a:a=f.a.fromJS(e.dataList);for(var r=0;r<e.dataList.length;r++)a=a.update(r,e=>e=(e=e.set("selectNum",0)).set("selectStatus",!1));return Object(T.a)(Object(T.a)({},e),{dataList:a.toJS()});default:return e}},M=Object(A.d)(Object(A.c)(Object(T.a)(Object(T.a)({},n),r)),Object(A.a)(I.a));a(76),a(77);(e=>{i.a.render(c.a.createElement(b.a,{store:M},c.a.createElement(e,null)),document.getElementById("root"))})(w)}},[[45,1,2]]]);
//# sourceMappingURL=main.c1172cdb.chunk.js.map